{{ define "main" }}
{{ .Content }}

{{ template "home/hero.html" . }}
{{ template "home/upcoming-events.html" . }}
{{ template "home/newsletter.html" . }}

<section class="mb-32 px-2 md:px-4 lg:px-6">
    <!-- Section header -->
    <div class="flex gap-4 items-center mb-8">
        <div class="w-12 h-12 md:w-16 md:h-16 lg:w-20 lg:h-20 relative flex items-center justify-center">
            <svg class="absolute inset-0 w-full h-full text-primary">
                <use href="#icon-backdrop" />
            </svg>
            <svg class="relative z-10 w-6 h-6 md:w-8 md:h-8 lg:w-10 lg:h-10 text-background">
                <use href="#gallery" />
            </svg>
        </div>
        <h2 class="text-2xl md:text-3xl lg:text-4xl text-primary font-semibold">Gallery</h2>
    </div>

    <!-- Images -->
    <div class="flex">
        <button class="text-primary" id="gallery-prev" disabled>
            <svg class="w-12">
                <use href="#arrow-left" />
            </svg>
        </button>
        <div class="flex grow justify-center gap-4 max-w-6xl mx-auto">
            {{ $allImages := slice }}
            {{ range (where .Site.RegularPages "Section" "events") }}
            {{ range .Params.images }}
            {{ $allImages = $allImages | append (dict "url" .url "alt" .alt "date" $.Date "eventTitle" $.Title
            "eventLink" $.Permalink) }}
            {{ end }}
            {{ end }}

            {{ $images := first 3 $allImages }}
            {{ range $i, $img := $images }}
            {{ if eq $i 1 }}
            <!-- Middle image: larger, with border -->
            <div class="flex-1 flex justify-center items-center">
                <div class="w-full h-64 md:h-80 border-4 border-primary rounded-xl overflow-hidden shadow-lg scale-105">
                    <img src="{{ $img.url }}" alt="{{ $img.alt }}" class="w-full h-full object-cover" loading="lazy">
                </div>
            </div>
            {{ else }}
            <!-- Side images: normal size -->
            <div class="flex-1 flex justify-center items-center">
                <div class="w-full h-48 md:h-64 rounded-lg overflow-hidden shadow-md">
                    <img src="{{ $img.url }}" alt="{{ $img.alt }}" class="w-full h-full object-cover" loading="lazy">
                </div>
            </div>
            {{ end }}
            {{ end }}
        </div>

        <button class="text-primary" id="gallery-next">
            <svg class="w-12">
                <use href="#arrow-right" />
            </svg>
        </button>
    </div>

    <div class="text-center mt-8">
        <a href="/events"
            class="inline-block bg-primary text-white px-6 py-3 rounded-lg hover:bg-opacity-90 transition">
            View All Events â†’
        </a>
    </div>

</section>


{{ end }}